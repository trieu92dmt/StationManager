@model ProductionManagementViewModel
<style>
    .pr-0 {
        padding-right: 0 !important;
    }

    .pt-2 {
        padding-top: 2px !important;
    }

    input.form-control.text-box.single-line {
        padding: 0 !important;
        text-align: center;
    }
</style>

<div class="modal-dialog modal-dialog-sm">
    <div class="modal-content">

        <div class="modal-header bg-primary">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h5 class="modal-title">Xác nhận hoàn tất công đoạn lớn</h5>
        </div>
        <div class="modal-body">
            <div id="divAlertWarningTask" class="alert alert-warning alert-dismissable divPopupMessage" style="display: none">
                <button type="button" class="alert-close close" aria-hidden="true" data-div="divAlertWarning">×</button>
                <div class="alert-message">
                </div>
            </div>
            <form id="frm-confirm-cdl">
                @Html.HiddenFor(p => p.TaskId)
                <div class="panel-group">
                    <div class="panel">
                        <div class="panel-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <div class="col-md-4 col-xs-5 pr-0">
                                        @Html.LabelByPropertyNameFor(p => p.ProductionOrder, LanguageResource.Assignment_LSXDT + ":")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        @Html.DisplayFor(p => Model.ProductionOrder)
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4 col-xs-5">
                                        @Html.LabelByPropertyNameFor(p => p.Summary, LanguageResource.Assignment_LSXD + ":")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        @Html.DisplayTextFor(p => Model.Summary)
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4 col-xs-5 pr-0">
                                        @Html.LabelByPropertyNameFor(p => p.ProductionOrder_SAP, LanguageResource.Assignment_LSXC + ":")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        @Html.DisplayFor(p => Model.ProductionOrder_SAP)
                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="col-md-4 col-xs-5 pr-0">
                                        @Html.LabelByPropertyNameFor(p => p.ProductName, "Sản phẩm:")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        (@Html.DisplayTextFor(p => Model.Qty)
                                        @Html.DisplayTextFor(p => Model.Unit))
                                        @Html.DisplayTextFor(p => Model.ProductCode) -
                                        @Html.DisplayTextFor(p => Model.ProductName)
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4 col-xs-5">
                                        @Html.LabelByPropertyNameFor(p => p.StepCode, "CĐ hoàn tất:")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        @(string.Format("{0} | {1}", Model.StepCode, Model.StepName))
                                    </div>
                                </div>
                                @*<div class="form-group">
                                    <div class="col-md-4 col-xs-5 pr-0">
                                        @Html.LabelByPropertyNameFor(p => p.ToStockCode, "CĐ kế tiếp:")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        @(string.Format("{0} | {1}", Model.ToStockCode, Model.ToStockName))
                                    </div>
                                </div>*@
                                <div class="form-group">
                                    <div class="col-md-4 col-xs-5 pr-0">
                                        @Html.LabelByPropertyNameFor(p => p.ConfirmWorkCenter, "Công đoạn lớn:")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        @(string.Format("{0}", Model.ConfirmWorkCenter))
                                        @Html.HiddenFor(x=>x.ConfirmWorkCenter)
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4 col-xs-5 pr-0">
                                        @Html.LabelByPropertyNameFor(p => p.WorkCenterConfirmTime, "Thời gian xác nhận:")
                                    </div>
                                    <div class="col-md-8 col-xs-7 display-for">
                                        @if (Model.IsWorkCenterCompleted != true)
                                        {
                                            @Html.RequiredTextboxFor(x => x.WorkCenterConfirmTime, "{0:yyyy-MM-dd}", new { @type = "date", @Value=DateTime.Now.Date.ToString("yyyy-MM-dd") })
                                        }
                                        else
                                        {
                                            @(string.Format("{0:dd/MM/yyyy}", Model.WorkCenterConfirmTime))
                                        }
                                    </div>
                                </div>
                                
                                @Html.Action("_ConfirmWorkCenterDetail", "ProductionManagement", new { @TaskId = Model.TaskId , @StepCode = Model.StepCode})
                            </div>
                        </div>
                        <div class="text-right">
                            <div><i>@string.Format("NV Tạo:{0} - {1: dd/MM/yyyy HH:mm}", Model.CreateByFullName, Model.CreateTime)</i></div>
                            @if (string.IsNullOrEmpty(Model.LastEditByFullName) && Model.LastEditTime != null)
                            {
                                <div><i>@string.Format("NV cập nhật:{0} - {1: dd/MM/yyyy HH:mm}", Model.LastEditByFullName, Model.LastEditTime)</i></div>
                            } 
                        </div>
                        <div class="modal-footer">
                            <span class="btn btn-default pull-left" data-dismiss="modal">@LanguageResource.Btn_Close</span>
                            @if (Model.IsWorkCenterCompleted != true && !string.IsNullOrEmpty(Model.StepCode))
                            {
                                <a class="btn btn-primary pull-right" id="btn-save-confirm-cdl">
                                    Xác nhận
                                </a>
                            } else { 
                              
                            }

                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>
