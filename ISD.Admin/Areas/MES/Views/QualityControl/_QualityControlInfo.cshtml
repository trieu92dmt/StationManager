
@model List<QualityControlInformationMappingViewModel>
@{
    var qcInfoList = (List<QualityControlInformationViewModel>)ViewBag.QCInfoList;
}
<table class="table table-bordered table-striped table-responsive table-qc-info table-sm" style="border: 1px solid #e3e3e3;">
    <thead>
        <tr>
            <th style="width: 1%; padding: 3px;">@LanguageResource.NumberIndex</th>
            <th style="width: 55%; padding: 3px;">Thông tin kiểm tra</th>
            <th colspan="3" style="width: 45%; padding: 3px;">@LanguageResource.Notes</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.Count() > 0)
        {
            for (int i = 0; i < Model.Count(); i++)
            {
                <tr class="row-info-@i">
                    <td rowspan="2" class="text-center">
                        @(i+1)
                        @Html.Hidden("QualityControlInformationViewModel[" + i + "].QualityControl_QCInformation_Id", Model[i].QualityControl_QCInformation_Id)
                    </td>
                    <td>
                        <select name="QualityControlInformationViewModel[@i].QualityControlInformationId" class="form-control">
                            <option value="">@LanguageResource.Dropdownlist_Choose</option>
                            @if (Model[i].QualityControlInformationId != null)
                            {
                                <option value="@Model[i].QualityControlInformationId" selected>@(Model[i].QualityControlInformationCode + " | " + Model[i].QualityControlInformationName)</option>
                            }
                            @if (qcInfoList != null)
                            {
                                foreach (var item in qcInfoList.Where(x => x.Id != Model[i].QualityControlInformationId).ToList())
                                {
                                    <option value="@item.Id">@item.Name</option>

                                }
                            }
                        </select>
                    </td>
                    <td colspan="3">
                        @Html.TextBox("QualityControlInformationViewModel[" + i + "].Notes", Model[i].Notes, new { @Class = "form-control" })
                    </td>
                </tr>
                <tr class="row-info-@i">
                    <td colspan="2">
                        <input type="file" name="QualityControlInformationViewModel[@i].File" multiple style="width: 80%!important" />
                    </td>
                    <td>
                        @if (Model[i].CheckedFileViewModel != null && Model[i].CheckedFileViewModel.Count() > 0)
                        {
                            <a class="btn btn-sm btn-info btn-show-image" data-type="QCINFO" data-id="@Model[i].QualityControl_QCInformation_Id"><i class="fa fa-file-image-o" aria-hidden="true"></i></a>
                        }
                    </td>
                    <td>
                        @if (Model[i].QualityControl_QCInformation_Id != null && Model[i].QualityControl_QCInformation_Id != Guid.Empty)
                        {
                            <a class="btn btn-sm btn-danger btn-remove-info" data-row="@i" data-id="@Model[i].QualityControl_QCInformation_Id">
                                <i class="fa fa-trash" aria-hidden="true"></i>
                            </a>
                        }

                    </td>
                </tr>
            }
        }
        else
        {
            <tr class="row-info-0">
                <td rowspan="2" class="text-center">
                    1
                </td>
                <td>
                    @Html.DropDownList("QualityControlInformationId", null, LanguageResource.Dropdownlist_Choose, new { @Name = "QualityControlInformationViewModel[0].QualityControlInformationId", @Class = "form-control" })
                </td>
                <td colspan="3">
                    @Html.TextBox("QualityControlInformationViewModel[0].Notes", null, new { @Class = "form-control" })
                </td>
            </tr>
            <tr class="row-info-0">
                <td colspan="4">
                    <input type="file" name="QualityControlInformationViewModel[0].File" multiple style="width: 80%!important" />
                </td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td colspan="2">
                <a class="btn btn-success btn-add-row-info pull-right"><i class="fa fa-plus" aria-hidden="true"> Thêm</i></a>
            </td>
        </tr>
    </tfoot>
</table>

